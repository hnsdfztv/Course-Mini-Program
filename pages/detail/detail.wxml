<!--pages/detail/detail.wxml-->
<view class="container">
  <!-- åŠ è½½çŠ¶æ€ -->
  <view wx:if="{{loading}}" class="loading-container">
    <view class="loading-icon">â³</view>
    <view class="loading-text">åŠ è½½ä¸­...</view>
  </view>

  <!-- è¯¦æƒ…å†…å®¹ -->
  <view wx:if="{{!loading && detailData}}" class="detail-content">
    <!-- å¤´éƒ¨ -->
    <view class="detail-header">
      <view class="header-icon">{{detailData.icon}}</view>
      <view class="header-title">{{detailData.title}}</view>
      <view class="header-subtitle">{{detailData.subtitle}}</view>
      
      <!-- å…ƒä¿¡æ¯ -->
      <view class="header-meta">
        <text wx:if="{{detailData.date}}" class="meta-item">ğŸ“… {{detailData.date}}</text>
        <text wx:if="{{detailData.year}}" class="meta-item">ğŸ“… {{detailData.year}}</text>
        <text wx:if="{{detailData.value}}" class="meta-value">{{detailData.value}}</text>
        <text wx:if="{{detailData.source}}" class="meta-item">ğŸ“° {{detailData.source}}</text>
      </view>

      <!-- æ ‡ç­¾ -->
      <view wx:if="{{detailData.tags}}" class="tags-container">
        <view wx:for="{{detailData.tags}}" wx:key="index" class="tag">
          {{item}}
        </view>
      </view>
    </view>

    <!-- ä¸»è¦å†…å®¹ -->
    <view class="detail-body">
      <!-- æ–°é—»ç±»å‹ï¼šcontentæ•°ç»„ -->
      <block wx:if="{{type === 'news' && detailData.content}}">
        <view wx:for="{{detailData.content}}" wx:key="index" class="content-section">
          <view class="section-subtitle">{{item.subtitle}}</view>
          <view class="section-text">{{item.text}}</view>
        </view>
      </block>

      <!-- å…¶ä»–ç±»å‹ï¼šsectionsæ•°ç»„ -->
      <block wx:if="{{type !== 'news' && detailData.sections}}">
        <view wx:for="{{detailData.sections}}" wx:key="index" class="content-section">
          <view class="section-title">{{item.title || item.subtitle}}</view>
          <view class="section-text">{{item.text || item.content}}</view>
        </view>
      </block>
    </view>

    <!-- åº•éƒ¨æ“ä½œ -->
    <view class="detail-footer">
      <button class="action-btn secondary" open-type="share">
        <text class="btn-icon">ğŸ“¤</text>
        <text class="btn-text">åˆ†äº«å†…å®¹</text>
      </button>
      <button class="action-btn primary" bindtap="backToHome">
        <text class="btn-icon">ğŸ </text>
        <text class="btn-text">è¿”å›é¦–é¡µ</text>
      </button>
    </view>
  </view>

  <!-- é”™è¯¯çŠ¶æ€ -->
  <view wx:if="{{!loading && !detailData}}" class="error-container">
    <view class="error-icon">âŒ</view>
    <view class="error-title">åŠ è½½å¤±è´¥</view>
    <view class="error-desc">æœªæ‰¾åˆ°ç›¸å…³å†…å®¹</view>
    <button class="retry-btn" bindtap="loadDetail">é‡è¯•</button>
  </view>
</view>
